<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>
<body>
    <div class="container my-5">
        <header class="bg-dark">
            <button style="position: absolute; right: 150px; top: 75px;" type="button" class="btn ">
                <i data-bs-toggle="modal" data-bs-target="#exampleModal" class="fa-solid fa-cart-shopping text-light  display-1"></i>
                <span id="cartlen" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                  
                  <span class="visually-hidden">unread messages</span>
                </span>
              </button>
            <h1 class="text-center text-light p-5">Shoping Cart</h1>
        </header>

        <main>
            <div class="row">
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 1</h5>
                          <p class="card-text">Price : $20</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 1' , 20 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 2</h5>
                          <p class="card-text">Price : $30</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 2' , 30 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 3</h5>
                          <p class="card-text">Price : $50</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 3' , 50 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
            </div>
            <div class="row my-2">
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 4</h5>
                          <p class="card-text">Price : $40</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 4' , 40 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 5</h5>
                          <p class="card-text">Price : $10</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 5' , 10 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                          <h5 class="card-title">Laptop 6</h5>
                          <p class="card-text">Price : $60</p>
                        </div>
                        <div class="card-footer">
                            <button onclick="addtocart('laptop 6' , 60 ,1)" class="btn btn-primary">Add To Cart</button>
                        </div>
                      </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Cart</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul id="cartItems">
        </ul>
        <h4 id="totalprice"></h4>
        <button class="btn-sm btn-primary" onclick="clearCart()" >Clear Cart</button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script>
        var cartItem = [];
        var total = 0;
        var cartItems = document.getElementById("cartItems");
        var cartlen = document.getElementById("cartlen");
        var totalprice = document.getElementById("totalprice");
        cartlen.innerHTML = "0";
        cartItems.innerHTML = "<h4>cart is empty</h4>";

        
        function addtocart(product , price ,qty){
            cartItem.push({name : product , price : price , qty : qty})
            total = total + price;
            
            
            var cartItemdata = JSON.stringify(cartItem);
            localStorage.setItem("data" , cartItemdata)
            localStorage.setItem("price" , total)
            //console.log(localStorage.getItem("data"))
            updateCart();
             
            
        }
        
        function updateCart(){
            
            cartItem = JSON.parse(localStorage.getItem("data"))
            total = JSON.parse(localStorage.getItem("price"))
            if(cartItem == null){
                cartItem = [];
            }
            if(total == null){
                total = 0;
            }
            //console.log(cartItem)
            var str = "";
            cartItem.map((data , index)=>{
                return(
                str += `
                <li>${data.name} - $${data.price} <button onclick="remove(${index} , ${data.price} , ${data.qty} )" class="btn-sm btn-primary my-2">-</button> ${data.qty} <button onclick="add(${index} , ${data.price} , ${data.qty} )" class="btn-sm btn-primary my-2">+</button> </li>
                `
                )
            })
            
            cartItems.innerHTML = str;
            totalprice.innerHTML = "Total Amount : " + total;

            cartlen.innerHTML = cartItem.length
            
        }
        
        updateCart();
        
        function remove(id , price ,qty){
          if(qty === 1){
          cartItem.splice(id , 1);
          cartItemdata = JSON.stringify(cartItem);
          localStorage.setItem("data" , cartItemdata)
          total = total - price;
          localStorage.setItem("price" , total)
          updateCart()
          }
          else{
          cartItem[id].qty -= 1; 
          cartItemdata = JSON.stringify(cartItem);
          localStorage.setItem("data" , cartItemdata)
          total = total - price;
          localStorage.setItem("price" , total)
          updateCart()
          }
        }

        function clearCart(){
          localStorage.removeItem("data");
          localStorage.removeItem("price");
          updateCart()
        }

        function add(id , price , qty){
          cartItem[id].qty += 1; 
          cartItemdata = JSON.stringify(cartItem);
          localStorage.setItem("data" , cartItemdata)
          total = total + price;
          localStorage.setItem("price" , total)
          updateCart()
        }
    </script>
</body>
</html>
